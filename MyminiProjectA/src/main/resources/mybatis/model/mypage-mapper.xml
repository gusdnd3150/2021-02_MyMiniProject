<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="myPage">
	
	<select id="selectResume" parameterType="pagingVo" resultType="resumeVo">
		select R1.*
		   from
			     (select *
			    from resume
			    where id=#{id}
			    order by resume_id asc
			    )R1
		    limit #{limit} offset #{offset}
		    
	</select>
	
	
	<select id="selectFileList" parameterType="int" resultType="portfolioFileVo">
		select R1.*
		   from
			     (select *
			    from user_portfolio_file
			    where id=#{id}
			    order by file_id asc
			    )R1
		    limit 8 offset 0
	</select>
	
	<insert id="insertFileUserFile" parameterType="portfolioFileVo">
	   insert into user_portfolio_file
	   (
	   id,
	   file_original_name,
	   file_saved_name
	   )
	   values
	   (
	   #{id},
	   #{file_original_name},
	   #{file_saved_name}
	   )
	 
	</insert>
	
	<delete id="deleteFileUserFile" parameterType="portfolioFileVo">
	  delete from user_portfolio_file
	  where file_id =#{file_id}
	   
	</delete>
	
	<update id="modResumeState" parameterType="resumeVo">
	  update resume
	  set resume_state =#{resume_state}
	  where resume_id =#{resume_id}
	</update>
	
	<select id="totalUserResume" resultType="int" parameterType="int">
	   select count(*)
	   from resume
	   where id=#{id}
	</select>
	
	
	<delete id="deleteResume" parameterType="int">
	  delete from resume
	  where resume_id=#{resume_id}
	</delete>
	
	
	
</mapper>