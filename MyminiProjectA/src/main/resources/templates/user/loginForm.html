<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"> 
<head>

<!-- 해더 css -->
<th:block th:replace="common/header :: headerCss"></th:block>

<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>



<!-- 해더 공통 -->
<th:block th:replace="common/header :: header"></th:block>


<div class="container" align="center">
  <h3><strong>로그인</strong></h3>
  <div class="row" style="background-color:white;border-radius:25px;width:50%">
    <div class="col" style="width:50%;padding-top: 12%;padding-bottom: 12%">

					<form name="logimForm" id="logimForm" method="post" action="login.do">
						  <div class="form-group" align="left">
						  <label>아이디</label>
						    <input type="text" id="idInput" class="form-control"  placeholder="your ID" name="user_id">
						    <small id="idBox" class="form-text text-muted"></small>
						  </div>
						  <div class="form-group" align="left">
						  <label>비밀번호</label>
						    <input type="password" id="PasswordInput" class="form-control" placeholder="Password" name="user_password">
						    <small id="PasswordBox" class="form-text text-muted"></small>
						  </div>
						  <div class="form-group" align="left">
						  <a href="#">비밀번호 찾기</a>
						  </div>
						  <br>
						</form>
				  <button type="submit" class="btn btn-primary btn-block" onclick="login()" style="width:100%">아이디 로그인</button>
				  <button type="submit" class="btn btn-success btn-block" onclick="join()" style="width:100%">회원가입</button>
	</div>
  </div>
</div>



</body>


<script>
window.onload = function(){
	 document.getElementById("loginHeader").setAttribute("class","nav-link active");
 }
 
 
 function login(){
	 var form = document.logimForm;
	 
	 if(form.user_id.value==""){
		 alert("아이디 입력은 필수입니다.");
		 return;
	 }else if(form.user_password.value==""){
		 alert("비밀번호 입력은 필수입니다.");
		 return;
	 }
	 /*
     document.logimForm.action="/login.do";
	 document.logimForm.method="post"; 
	 document.logimForm.submit();
	 */
	  var params = $("#logimForm").serialize(); 
		    $.ajax({
		        url: '/userLogin.do',
		        type: 'POST',
		        data:params,
		        contentType: 'application/x-www-form-urlencoded; charset=UTF-8', 
		        dataType: 'text',
		        success: function (data) {
			          if(data=='success'){
			        	  alert("로그인 성공");
			        	  location.href="/main.do";
			          }else if(data=='noMachPassword'){
			        	  document.getElementById("PasswordBox").innerHTML='비밀번호 불일치';
			        	  document.getElementById("PasswordInput").style.borderColor="red";
			          }else if(data=='noId'){
			        	  document.getElementById("idBox").innerHTML='아이디가 존재 하지않습니다';
			        	  document.getElementById("idInput").style.borderColor="red";
			          }
		        }
		    }); 
 }
  function join(){
	  if(window.confirm("회원가입 하시겠습니까?")){
	  location.href="/chooseJoinType.do";
	  }
  }

</script>
</html>